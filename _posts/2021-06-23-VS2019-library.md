---
layout: post
title: 비주얼스튜디오와 라이브러리 정리1
categories: [C++]
tags: [C++]
published: true	
---

```

외부라이브러리 사용시 알아야 할 사항

1. dll과 lib
DLL(dynamic-link library) 동적 라이브러리 : 마이크로소프트 윈도우에서 구현된 동적 라이브러리, 내부에는 다른 프로그램이 불러서 쓸 수 있는 다양한 함수들을 가지고 있는데, 확장 DLL인 경우는 클래스를 가지고 있기도 한다. DLL은 COM을 담는 그릇의 역할도 한다.
dll파일은 runtime 중에, lib파일은 compile 할 때 필요합니다.

사용하는 방법:
묵시적 링킹(implicit linking): 실행 파일 자체에 어떤 DLL의 어떤 함수를 사용하겠다는 정보를 포함시키고 운영체제가 프로그램 실행 시 해당 함수들을 초기화한 후 그것을 이용하는 방법, 주로 컴파일러가 자동으로 사용
명시적 링킹(explicit linking): 프로그램이 실행 중일 때 API를 이용하여 DLL 파일이 있는지 검사하고 동적으로 원하는 함수만 불러와서 쓰는 방법, 사용하고자 하는 DLL이나 함수가 실행환경에 있을지 없을 지 잘 모르는 경우에 사용
---
LIB(library) 정적 라이브러리

일반적으로 실행파일을 만들 때는 소스 코드를 컴파일하고 만들어지니 obj파일을 링커가 하나로 묶어exe파일을 만듭니다. 여기서 lib파일을 사용하면 링크 단계에서 링커가 이 lib파일도 같이 묶어서 하나의 exe파일을 만들게 됩니다.

쉽게 말하면 우리가 컴파일에 성공해 만들어지는 exe파일 안에 lib의 내용이 모두 들어가게 됩니다.
우리가 일반적으로 쓰는 stdio.h 같은 코드 덩어리도 실제 선언한 곳에 전부 들어가 있게 됩니다. 그렇기 때문에 많이 쓰이면 쓰일수록 파일이 무거워지게 되며, RAM에 메모리가 많이 올라가게 됩니다.
---
---
미리 컴파일된 헤더 pch와의 차이는?
pch는 말 그대로 전처리기가 헤더 파일의 내용을 가져와서 컴파일러가 그 내용을 컴파일하지만, lib은 이미 컴파일된 obj파일을 가지고 링커가 연결만 시켜줍니다.

또한 pch는 사용하고자 하는 곳에 모두 명시를 해야 하지만, lib은 하지 않아도 괜찮습니다. 다만 아까 말했듯이 많이 사용한다면 파일의 크기가 커지는 단점이 있습니다. -> (이러한 단점을 해결하기 위해 dll이 나왔습니다.

---
내 소스파일에 적용하기

lib파일을 만들고 해당 소스를 외부의 다른 프로젝트에서 사용하려면 필요한 것은 2가지가 있습니다.
1. 링커에게 해당 lib의 경로를 알려준다.
2. 해당 include(header)의 경로를 알려준다.

직접 자신의 소스 파일에 적용하는 방법은 뒤에서 진행하도록 하겠습니다.

---
dll은 lib과 달리 파일을 실행할 때 해당 링커가 dll의 위치를 알고 있다면 exe파일에 내용이 포함되어 있지 않아도 실행이 가능하다.
즉 동적인 링킹이 가능하다(dll은 프로세스의 주소 공간에 동적으로 로드가 가능하게 만들어져 있기 때문)

동적 링킹으로 인한 장점은?
- 실행 파일의 메모리 절약이 가능합니다.
- RAM 메모리 절약 또한 가능합니다. 2개 이상의 파일에서 하나의 dll파일을 사용할 때 RAM에는 하나의 dll파일만 올라가게 됩니다.
---

---
링킹의 방법
1. 암시적 링킹(
---

비주얼 스튜디오 2019 라이브러리 추가

프로젝트파일 우클릭 -> 속성

설정상태 ) 모든 구성, 활성(x64)

1. 헤더파일(*.h, *.hpp) 추가 (대부분 include폴더)

    구성속성 -> C/C++ -> 일반 -> 추가 포함 디렉터리 -> 편집

    -> ... (클릭, 오른쪽 끝부분에 마우스 커서 가져대기)

    -> *.h, *.hpp 있는 폴더 (대부분 include 폴더)
 
2. 라이브러리파일(*.lib) 추가

    구성속성 -> 링커 -> 일반 -> 추가 라이브러리 디렉터리 -> 편집

    -> *.lib 폴더

3. 라이브러리파일(*.lib) 개별추가 (2항과 동시에 시행)

    구성속성 -> 링커 -> 입력 -> 추가 종속성 -> *.lib 파일 이름 적음

4. 동적 링크 라이브러리파일(*.dll) 추가

    구성속성 -> 디버깅 -> 환경 -> 폴더 추가


ref) 위키피디아 검색어 (DLL, 

국내기업
1. JLK (http://jlkgroup.com/#/medical/main) : cell
2. VUNO (https://www.vuno.co/) : diagnosis
3. NOUL (https://noul.kr/)
4. LUNIT (https://www.lunit.io/ko) : diagnosis
5. MEDICAL IP (https://medicalip.com/) : segmentation

메디컬아이피


```
